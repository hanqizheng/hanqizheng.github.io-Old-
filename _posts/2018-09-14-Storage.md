---
layout:     post
title:      "浅谈3种存储"
subtitle:   "对象存储、 块存储、 文件存储"
date:       2018-09-14
author:     "Han Qizheng"
header-img: "img/Storage.jpg"
tags:
    - 分布式存储
---
这可以算是一篇门外汗普及向的blog，所以不想有太多太多的专业术语和名词（因为我也不知道那些名词到底代表了什么.jpg）

基本想达到的效果是看了以后大概对这三种概念有了一个轮廓的认知，然后别人问起里能说个一二然后还不是说的错误的！

# 块存储

> “虚拟座谈会”中王旭提到：块存储是给虚拟机用的。


其实我早就接触过块存储了，只是不知道那就是块存储。

王旭大佬说道块存储是给虚拟机用的，其实意思就是假如我们现在有5块硬盘，物理上的那种硬盘。然后我们把它们放在一台主机上。

然后相信有好多同学接触过磁盘分区这件事情，给哪个盘分多少的空间。但实际上就是那5块硬盘的大小，然后我们可以将那么大的地方分成若干分，5份可以，2份也可以。但实际上他并不是那么大，它是5块硬盘中挑出了那么大视作一个逻辑上的块。

例如第一个逻辑硬盘A里面，可能第一个200M是来自物理硬盘1，第二个200M是来自物理硬盘2，所以逻辑硬盘A是由多个物理硬盘逻辑虚构出来的硬盘。）      

接着块存储会采用映射的方式将这几个逻辑盘映射给主机，主机上面的操作系统会识别到有5块硬盘，但是操作系统是区分不出到底是逻辑还是物理的，它一概就认为只是5块裸的物理硬盘而已，跟直接拿一块物理硬盘挂载到操作系统没有区别的，至少操作系统感知上没有区别。此种方式下，操作系统还需要对挂载的裸硬盘进行分区、格式化后，才能使用，与平常主机内置硬盘的方式完全无异。


### 优点
现在硬盘不值钱，用几个硬盘拼接就可以完成大空间的存储，是一件相当廉价，划算的事情。

因为是多块硬盘拼接起来的，所以在读写数据的时候可以并行执行，读写速度进一步提高。
### 缺点
操作系统之间如果版本，系统之间存在区别，文件是很难共享的。


# 文件存储



块存储虽然在文件的读写速率上快了不少，但是不能共享终究会在某些特定的场景下不太适用。

为了解决共享上的缺陷，文件存储就出来了。当然，文件存储的诞生肯定不是单纯的因为这一点。

文件存储和接下来的对象存储在本质上都是提供了一些接口用来读写文件。

还有一个需要注意的地方就是文件存储与相对底层的块存储不同的是，他不在乎底层的实现，而是在应用层面完成的。

### 优点
第一个优点那肯定是共享方便

还有就是文件存储的实现也相对简单廉价

### 缺点
读写速度慢

# 对象存储
对象存储可以简单的理解为提供了一些接口用来上传下载文件的。其实就是键值对的存储。

一般都采用RESTful API

打文件小文件都可以

### 优点
读写较快，便于共享

现阶段很多地方都在用

# 引用知乎上一个不错的理解
![](https://pic2.zhimg.com/80/v2-f359dd921a4b296e6e5c5216587d8b59_hd.jpg)
块存储一般体现形式是卷或者硬盘（比如windows里面看到的c盘），数据是按字节来访问的，对于块存储而言，对里面存的数据内容和格式是完全一无所知的。好比上面图中，数据就像玉米粒一样堆放在块存储里，块存储只关心玉米粒进来和出去，不关心玉米粒之间的关系和用途。块存储只负责数据读取和写入，因此性能很高，适用于对响应时间要求高的系统。比如数据库等。

![](https://pic2.zhimg.com/80/v2-9b3ad5b5539a32b87007ab24caa93259_hd.jpg)
文件存储一般体现形式是目录和文件（比如C:\Users\Downloads\text.doc），数据以文件的方式存储和访问，按照目录结构进行组织。文件存储可以对数据进行一定的高级管理，比如在文件层面进行访问权限控制等。好比上面图中，数据像玉米粒一样组成玉米棒子，再对应到不同的玉米杆上，要找到某个玉米粒，先找到玉米杆，再找到玉米棒子，然后根据玉米粒在玉米棒子上的位置找到它。文件存储可以很方便的共享，因此用途非常广泛。比如常用的NFS、CIFS、ftp等都是基于文件存储的。

![](https://pic3.zhimg.com/80/v2-3675fbd0824c938a022a5424e17d92e2_hd.jpg)
对象存储一般体现形式是一个UUID（比如https://www.youtube.com/watch?v=nAKxJbcec8U），数据和元数据打包在一起作为一个整体对象存在一个超大池子里。对于对象访问，只需要报出它的UUID，就能立即找到它，但访问的时候对象是作为一个整体访问的。好比上面图中，数据的玉米粒被做成了玉米罐头，每个玉米罐头都有一个唯一出厂号，但是买卖罐头，都一次是一盒为单位。从设计之初衷（一般的对象存储都是基于哈希环之类的技术来实现），对象存储就可以非常简单的扩展到超大规模，因此非常适合数据量大、增速又很快的视频、图像等。


作者：刘洋
链接：https://www.zhihu.com/question/21536660/answer/393094422
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。




# 参考
- [知乎问答:块存储、文件存储、对象存储的本质区别是什么](https://www.zhihu.com/question/21536660)

- [虚拟座谈会:有关分布式存储的三个问题](http://www.infoq.com/cn/articles/virtual-forum-three-basic-issues-about-distributed-storage)

- [块存储的世界(入门级)](http://www.wzxue.com/%E5%9D%97%E5%AD%98%E5%82%A8%E7%9A%84%E4%B8%96%E7%95%8C/)