---
layout:     post
title:      "关于TCP三次握手"
subtitle:   "TCP"
date:       2019-01-30
author:     "Han Qizheng"
header-img: "img/tcp.jpg"
tags:
    - 协议
---

# 关于TCP3次握手

总结一了一些关于TCP三次握手的相关解释，都值得好好看看。

## 1
在Google Groups的TopLanguage中看到一帖讨论TCP“三次握手”觉得很有意思。

贴主提出“TCP建立连接为什么是三次握手？”的问题，在众多回复中，有一条回复写道：

“`这个问题的本质是, 信道不可靠`, 但是通信双发需要就某个问题达成一致. 而要解决这个问题

无论你在消息中包含什么信息, `三次通信是理论上的最小值`. 

所以三次握手不是TCP本身的要求, 而是为了满足"在不可靠信道上可靠地传输信息"这一需求所导致的.

请注意这里的本质需求,信道不可靠, 数据传输要可靠. 三次达到了, 那后面你想接着握手也好, 发数据也好, 跟进行可靠信息传输的需求就没关系了.

因此,如果信道是可靠的, 即无论什么时候发出消息, 对方一定能收到, 或者你不关心是否要保证对方收到你的消息, 那就能像UDP那样直接发送消息就可以了.”。这可视为对“三次握手”目的的另一种解答思路。

> 这是我个人认为最好的一个解释

## 2

可不是么，两个人见面握一次手就够了，连握三次手是很神经病的行为。

`是three-way handshake，而不是 three handshakes`

三步握手，是一次握手分三个步骤进行，而不是一共握三次手。

正恩伸出手说：你看，我手里没有武器。（SYN）

朗普看了看说：嗯，确实没有。（ACK）于是也伸出手说：你看，我手里也没有武器。（SYN）

正恩看了看说：嗯，看来你确实有诚意。（ACK）

于是双方的手握到了一起，随着手上的一阵颤抖，一切变得索然无味……(突然开车？？？？)

## 3

![](https://pic2.zhimg.com/80/v2-288e92aa91f83ea068b7a5256e0835c5_hd.jpg)

![](https://pic3.zhimg.com/80/v2-2e92a8054ba98532592aecc47c37722e_hd.jpg)

![](https://pic2.zhimg.com/80/v2-3d4e77b23469ae84358d90d5b0bd451d_hd.jpg)

## 4

我老家开往北京的大巴，由于没有车站买票，所以采用直接给大巴司机打电话预定的方式订票。

而大巴司机的智慧简直让我惊叹劳动人民的伟大。

订票流程是这样子的

我们前一天上午先给司机打电话订票。(1)

司机前一天下午打电话向每一个人确认。(2)

第二天坐车的时候凭借电话号码上车。(3)

这就是活生生的三次握手。

**giao笑的是下面的评论**

- 还有可能从高速公路上扔下去，完美模拟了丢包（2333333333333333）

- 一次握手就够。上车付钱😏我就是这么干的


### 参考来源
[知乎](https://www.zhihu.com/question/24853633)